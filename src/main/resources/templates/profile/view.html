<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .pfp {
            width: 140px;
            height: 140px;
            left: 50px;
            top: 5px;
            border-radius: 50%;
            border: 3px solid black;
            position: absolute;
            background-color: transparent;
            z-index: 1;
        }


        .username-box {
            display: block; margin-top: 80px; width: 100%; background: #00000011;
            border-top-left-radius: 2%;border-top-right-radius: 2%; padding: 10px;"
        }

        .doublepane {
            display: flex;
        }


        .photo-grid {
            display: grid;
            grid-template-columns: repeat(3, 175px);
            gap: 15px;
            justify-content: center;
        }
        .profile-box {
            width: 175px;
            height: 175px;
            overflow: hidden;
            border-radius: 8px;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .profile-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }


        .interest-tag {
            display: inline-block;
            padding: 5px 10px;
            margin: 3px;
            background-color: #ffffff;
            border-radius: 15px;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.2s;
        }


        @media screen and (max-width: 480px) {
            .doublepane {
                flex-direction: column;
            }
        }
    </style>
</head>
<body class="bg-light">

<header th:replace="/fragments/header :: mainHeader"></header>

<div class="container mt-2 d-flex align-items-center" style="position: relative;">
    <img th:src="${profile.Avatar != null ? '/file/avatar/' + profile.Username + '.png' : '/img/default-pfp.png'}"
         class="pfp rounded-circle" style="width:150px;height:150px;object-fit:cover;" alt="Profile Picture">

    <div class="username-box">
        <div style="display: block; margin-left: 200px;">
            <div class="d-flex align-items-center" style="justify-content: center; gap: 15px;">
                <h3 th:text="${'@' + profile.Name}">Username Profile</h3>
                <a th:if="${isOwner}" th:href="@{/profile/edit}" class="btn btn-danger ms-auto" style="margin-right: 10px">Edit Profile</a>
            </div>
            <div th:if="${profile != null}" class="d-flex align-items-center" style="gap: 15px;">
                <h6 th:text="${'Gender: ' + profile.Gender}"></h6>
                <h6 th:text="${'Age: ' + profile.Age}"></h6>
            </div>
        </div>

        <div class="doublepane">
            <div style="width: 50%; display: block; padding: 5px;">
                <h4>Who am I?</h4>
                <p style="padding: 5px;"><span th:text="${profile.WhoAmI}"></span></p>
                <h4>What am I looking for?</h4>
                <p style="padding: 5px;"><span th:text="${profile.WhatIWant}"></span></p>
                <h4>What do I dislike?</h4>
                <p style="padding: 5px;"><span th:text="${profile.WhatIDislike}"></span></p>

                <div class="mb-3">
                    <h4>Interests</h4>
                    <div id="interests-container">
                        <span class="interest-tag" th:each="interest : ${profile.getInterests()}" th:data-value="${interest}" th:text="${interest.displayName}"></span>
                    </div>
                </div>
            </div>
            <div class="photo-grid" style="width: 50%;">
                <div class="profile-box" th:each="m : ${profile.getPhotos()}">
                    <img th:if="${m.Image != null}" th:src="${'/file/photo/' + m.ID}" alt="User Photo" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    <div th:unless="${m.Image != null}" style="background: #00000011; width: 100%; height: 100%;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="/fragments/footer :: mainFooter"></footer>

</body>
</html>
